<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Organizador de Resumos - By Erique Melo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body { 
      font-family: 'Poppins', sans-serif; 
      background-color: #111827; /* Cor de fundo base */
    }
    
    ::selection { 
      background-color: #ef4444; 
      color: #fff; 
    }
    
    .title-gradient {
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      background-image: linear-gradient(to right, #ef4444, #f43f5e);
      text-shadow: 0 2px 10px rgba(239, 68, 68, 0.3);
    }
    
    .glass-effect {
      background: linear-gradient(135deg, rgba(30, 20, 20, 0.2), rgba(30, 20, 20, 0.1));
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: linear-gradient(to right, #ef4444, #f43f5e);
      box-shadow: 0 4px 8px rgba(239, 68, 68, 0.25);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(239, 68, 68, 0.35);
    }
    
    .feed-item {
      transition: all 0.3s ease;
    }
    
    .feed-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
      border-color: rgba(239, 68, 68, 0.3);
    }
    
    [contenteditable]:empty::before {
      content: 'Digite aqui o conte√∫do do seu resumo...';
      color: #6b7280;
      pointer-events: none;
      font-style: italic;
    }
    
    /* Modal fade */
    #summary-modal {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    #summary-modal.show {
      opacity: 1;
      visibility: visible;
    }
    
    #summary-modal .modal-content {
      transform: scale(0.95);
      transition: transform 0.3s ease;
    }
    
    #summary-modal.show .modal-content {
      transform: scale(1);
    }
    
    /* Cores para as grandes √°reas (FUNCIONALIDADE MANTIDA) */
    .area-clinica { border-left: 4px solid #ef4444; }
    .area-cirurgia { border-left: 4px solid #3b82f6; }
    .area-go { border-left: 4px solid #10b981; }
    .area-pediatria { border-left: 4px solid #f59e0b; }
    .area-preventiva { border-left: 4px solid #8b5cf6; }
    .area-mfc { border-left: 4px solid #ec4899; }
    
    .area-tag {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }
    
    .tag-clinica { background-color: rgba(239, 68, 68, 0.2); color: #fca5a5; }
    .tag-cirurgia { background-color: rgba(59, 130, 246, 0.2); color: #93c5fd; }
    .tag-go { background-color: rgba(16, 185, 129, 0.2); color: #6ee7b7; }
    .tag-pediatria { background-color: rgba(245, 158, 11, 0.2); color: #fcd34d; }
    .tag-preventiva { background-color: rgba(139, 92, 246, 0.2); color: #c4b5fd; }
    .tag-mfc { background-color: rgba(236, 72, 153, 0.2); color: #fbcfe8; }
    
    /* Anima√ß√µes de entrada */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-up { animation: fadeUp 0.5s ease-out forwards; }
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }
    .delay-3 { animation-delay: 0.3s; }
    
    /* Barra de busca e filtros */
    .search-container { position: relative; }
    .search-container i {
      position: absolute; left: 1rem; top: 50%;
      transform: translateY(-50%); color: #9ca3af;
    }
    .search-input { padding-left: 2.75rem; }
    
    .filter-option { transition: all 0.2s ease; }
    .filter-option.active {
      background-color: rgba(239, 68, 68, 0.2); color: #fca5a5;
      border-color: rgba(239, 68, 68, 0.5);
    }
  </style>
</head>

<body class="bg-gray-900 min-h-screen p-4 md:p-6" style="background-image: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(220, 38, 38, 0.15), transparent), linear-gradient(to right bottom, rgb(17, 24, 39), rgb(55, 22, 22), rgb(17, 24, 39));">
  <main class="max-w-8xl mx-auto">
    <div class="text-center mb-12 md:mb-16 animate-fade-up">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold title-gradient mb-3">üìö Organizador de Resumos</h1>
      <p class="text-gray-400 text-lg md:text-xl">Escreva, salve e consulte seus resumos de forma pr√°tica.</p>
    </div>

    <div class="glass-effect rounded-2xl p-6 mb-10 animate-fade-up delay-1">
      <h2 class="text-2xl font-bold text-white mb-5 flex items-center gap-3">
        <i class="fas fa-pen-to-square text-red-400"></i>
        <span id="editor-title">Novo Resumo</span>
      </h2>
      
      <form id="summary-form">
        <input type="hidden" id="summary-id">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-5">
          <div>
            <input type="text" id="summary-title" placeholder="T√≠tulo do resumo" required
              class="w-full p-4 rounded-xl bg-gray-800/60 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700/50 transition-all duration-300" />
          </div>
          <div>
            <select id="summary-area" required
              class="w-full p-4 rounded-xl bg-gray-800/60 text-gray-200 focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700/50 transition-all duration-300">
              <option value="" disabled selected>Selecione a Grande √Årea</option>
              <option value="Cl√≠nica M√©dica">Cl√≠nica M√©dica</option>
              <option value="Cirurgia">Cirurgia</option>
              <option value="G&O">G&O</option>
              <option value="Pediatria">Pediatria</option>
              <option value="Preventiva">Preventiva</option>
              <option value="MFC">MFC</option>
            </select>
          </div>
        </div>

        <div id="summary-content" contenteditable="true" 
          class="w-full min-h-[200px] p-4 rounded-xl bg-gray-800/60 text-gray-200 border border-gray-700/50 mb-5 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300">
        </div>

        <div class="flex items-center gap-4">
          <button type="submit" class="btn-primary px-6 py-3 rounded-xl text-white font-semibold text-lg flex items-center gap-2">
            <i class="fas fa-floppy-disk"></i>
            <span id="save-button-text">Salvar Resumo</span>
          </button>
          <button type="button" id="clear-button" class="px-6 py-3 rounded-xl text-gray-400 hover:bg-gray-700/50 hover:text-white transition-all duration-300">
            Limpar
          </button>
        </div>
      </form>
    </div>

    <div class="glass-effect rounded-2xl p-6 mb-6 animate-fade-up delay-2">
      <div class="flex flex-col md:flex-row gap-4">
        <div class="search-container flex-1">
          <i class="fas fa-search"></i>
          <input type="text" id="search-input" placeholder="Buscar por t√≠tulo..." 
            class="search-input w-full p-4 rounded-xl bg-gray-800/60 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 border border-gray-700/50 transition-all duration-300">
        </div>
        
        <div class="flex flex-wrap items-center gap-2">
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300 active" data-area="all">Todas</button>
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300" data-area="Cl√≠nica M√©dica">Cl√≠nica</button>
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300" data-area="Cirurgia">Cirurgia</button>
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300" data-area="G&O">G&O</button>
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300" data-area="Pediatria">Pediatria</button>
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300" data-area="Preventiva">Preventiva</button>
          <button class="filter-option px-4 py-2 rounded-xl border border-gray-700 text-gray-300" data-area="MFC">MFC</button>
        </div>
      </div>
    </div>

    <div class="glass-effect rounded-2xl p-6 animate-fade-up delay-3">
      <h2 class="text-2xl font-bold text-white mb-7 flex items-center gap-3">
        <i class="fas fa-book-open text-red-400"></i> Resumos Salvos
        <span id="results-count" class="text-sm font-normal text-gray-400 ml-2"></span>
      </h2>
      <div id="summaries-feed" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 md:gap-6"></div>
    </div>
  </main>

  <div id="summary-modal" class="fixed inset-0 flex items-center justify-center bg-black/80 z-50 p-4">
    <div class="modal-content glass-effect rounded-2xl max-w-3xl w-full max-h-[85vh] overflow-y-auto p-6 relative">
      <button id="close-modal" class="absolute top-5 right-5 text-gray-400 hover:text-red-400 text-xl transition-colors duration-300 z-10">
        <i class="fas fa-times"></i>
      </button>

      <h2 id="modal-title" class="text-2xl font-bold text-white mb-2 pr-8"></h2>
      <div id="modal-area" class="mb-3"></div>
      <p id="modal-date" class="text-sm text-gray-400 mb-6"></p>
      <div id="modal-content" class="text-gray-200 leading-relaxed space-y-4 prose prose-invert prose-red max-w-none"></div>

      <div class="mt-8 flex justify-end gap-3">
        <button id="modal-edit" class="px-5 py-2.5 bg-blue-600/80 hover:bg-blue-600 text-white rounded-xl flex items-center gap-2 transition-all duration-300">
          <i class="fas fa-edit"></i> Editar
        </button>
        <button id="modal-close" class="px-5 py-2.5 bg-red-600/80 hover:bg-red-600 text-white rounded-xl flex items-center gap-2 transition-all duration-300">
          <i class="fas fa-times"></i> Fechar
        </button>
      </div>
    </div>
  </div>

  <script>
    // Todo o seu JavaScript original foi mantido aqui, sem nenhuma altera√ß√£o.
    // Ele continua funcionando exatamente da mesma forma.
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('summary-form');
      const summaryIdInput = document.getElementById('summary-id');
      const titleInput = document.getElementById('summary-title');
      const areaInput = document.getElementById('summary-area');
      const contentInput = document.getElementById('summary-content');
      const feedContainer = document.getElementById('summaries-feed');
      const editorTitle = document.getElementById('editor-title');
      const saveButtonText = document.getElementById('save-button-text');
      const clearButton = document.getElementById('clear-button');
      const searchInput = document.getElementById('search-input');
      const filterOptions = document.querySelectorAll('.filter-option');
      const resultsCount = document.getElementById('results-count');

      // Modal refs
      const modal = document.getElementById("summary-modal");
      const modalTitle = document.getElementById("modal-title");
      const modalArea = document.getElementById("modal-area");
      const modalDate = document.getElementById("modal-date");
      const modalContent = document.getElementById("modal-content");
      const modalEdit = document.getElementById("modal-edit");
      const modalClose = document.getElementById("modal-close");
      const closeX = document.getElementById("close-modal");

      let summaries = JSON.parse(localStorage.getItem('summaries')) || [];
      let currentFilter = 'all';
      let currentSearch = '';

      const saveSummaries = () => {
        localStorage.setItem('summaries', JSON.stringify(summaries));
      };

      const openModal = (summary) => {
        modalTitle.textContent = summary.title;
        modalArea.innerHTML = getAreaTag(summary.area);
        modalDate.textContent = "Salvo em: " + new Date(summary.timestamp).toLocaleDateString('pt-BR', {
          day: '2-digit', month: '2-digit', year: 'numeric',
          hour: '2-digit', minute: '2-digit'
        });
        modalContent.innerHTML = summary.content.replace(/\n/g, '<br>');
        modal.classList.add("show");
        modalEdit.onclick = () => {
          loadSummaryForEditing(summary.id);
          closeModal();
        };
      };

      const closeModal = () => {
        modal.classList.remove("show");
      };

      const getAreaClass = (area) => {
        switch(area) {
          case 'Cl√≠nica M√©dica': return 'area-clinica';
          case 'Cirurgia': return 'area-cirurgia';
          case 'G&O': return 'area-go';
          case 'Pediatria': return 'area-pediatria';
          case 'Preventiva': return 'area-preventiva';
          case 'MFC': return 'area-mfc';
          default: return 'area-clinica';
        }
      };

      const getAreaTag = (area) => {
        let tagClass = '';
        let text = '';
        switch(area) {
          case 'Cl√≠nica M√©dica': tagClass = 'tag-clinica'; text = 'Cl√≠nica M√©dica'; break;
          case 'Cirurgia': tagClass = 'tag-cirurgia'; text = 'Cirurgia'; break;
          case 'G&O': tagClass = 'tag-go'; text = 'G&O'; break;
          case 'Pediatria': tagClass = 'tag-pediatria'; text = 'Pediatria'; break;
          case 'Preventiva': tagClass = 'tag-preventiva'; text = 'Preventiva'; break;
          case 'MFC': tagClass = 'tag-mfc'; text = 'MFC'; break;
          default: tagClass = 'tag-clinica'; text = 'Cl√≠nica M√©dica';
        }
        return `<span class="area-tag ${tagClass}">${text}</span>`;
      };

      const filterAndSearchSummaries = () => {
        let filteredSummaries = summaries;
        if (currentFilter !== 'all') {
          filteredSummaries = filteredSummaries.filter(s => s.area === currentFilter);
        }
        if (currentSearch) {
          const searchTerm = currentSearch.toLowerCase();
          filteredSummaries = filteredSummaries.filter(s => 
            s.title.toLowerCase().includes(searchTerm)
          );
        }
        return filteredSummaries;
      };

      const renderSummaries = () => {
        const filteredSummaries = filterAndSearchSummaries();
        feedContainer.innerHTML = '';
        resultsCount.textContent = `(${filteredSummaries.length} resumo${filteredSummaries.length !== 1 ? 's' : ''})`;
        if (filteredSummaries.length === 0) {
          feedContainer.innerHTML = `<div class="col-span-full text-center py-10"><i class="fas fa-file-alt text-4xl text-gray-600 mb-3"></i><p class="text-gray-500">Nenhum resumo ${currentSearch ? 'encontrado' : 'salvo ainda'}.</p><p class="text-gray-400 text-sm mt-1">${currentSearch ? 'Tente alterar os termos da busca' : 'Comece criando seu primeiro resumo!'}</p></div>`;
          return;
        }
        filteredSummaries.sort((a, b) => b.timestamp - a.timestamp);
        filteredSummaries.forEach(summary => {
          const areaClass = getAreaClass(summary.area);
          const card = document.createElement('div');
          card.className = `feed-item glass-effect p-5 rounded-2xl cursor-pointer ${areaClass} relative group`;
          card.innerHTML = `
            ${getAreaTag(summary.area)}
            <h3 class="text-lg font-semibold text-white mb-2 line-clamp-1 relative z-10">${summary.title}</h3>
            <p class="text-sm text-gray-400 mb-3 relative z-10">${new Date(summary.timestamp).toLocaleDateString('pt-BR')}</p>
            <div class="text-gray-300 text-sm line-clamp-3 relative z-10">${summary.content.replace(/<[^>]*>/g, '')}</div>
            <div class="absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-all duration-300 z-20">
              <button class="edit-btn p-2 rounded-lg bg-gray-800/70 hover:bg-gray-700/70 text-gray-300 hover:text-blue-400 transition-colors" data-id="${summary.id}"><i class="fas fa-edit"></i></button>
              <button class="delete-btn p-2 rounded-lg bg-gray-800/70 hover:bg-gray-700/70 text-gray-300 hover:text-red-400 transition-colors" data-id="${summary.id}"><i class="fas fa-trash-alt"></i></button>
            </div>
          `;
          card.addEventListener('click', (e) => {
            if (e.target.closest('button')) return;
            openModal(summary);
          });
          card.querySelector('.edit-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            loadSummaryForEditing(summary.id);
          });
          card.querySelector('.delete-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            deleteSummary(summary.id);
          });
          feedContainer.appendChild(card);
        });
      };

      const loadSummaryForEditing = (id) => {
        const summary = summaries.find(s => s.id === id);
        if (summary) {
          summaryIdInput.value = summary.id;
          titleInput.value = summary.title;
          areaInput.value = summary.area;
          contentInput.innerHTML = summary.content;
          editorTitle.textContent = 'Editando Resumo';
          saveButtonText.textContent = 'Atualizar Resumo';
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      };

      const deleteSummary = (id) => {
        if (confirm('Tem certeza que deseja excluir este resumo?')) {
          summaries = summaries.filter(s => s.id !== id);
          saveSummaries();
          renderSummaries();
          const toast = document.createElement('div');
          toast.className = 'fixed bottom-4 right-4 glass-effect px-4 py-2 text-white rounded-lg transition-all duration-300';
          toast.innerHTML = '<i class="fas fa-trash-alt mr-2"></i> Resumo exclu√≠do';
          document.body.appendChild(toast);
          setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 300); }, 3000);
        }
      };

      const clearForm = () => {
        form.reset();
        summaryIdInput.value = '';
        contentInput.innerHTML = '';
        editorTitle.textContent = 'Novo Resumo';
        saveButtonText.textContent = 'Salvar Resumo';
      };

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const id = summaryIdInput.value;
        const title = titleInput.value;
        const area = areaInput.value;
        const content = contentInput.innerHTML;
        if (id) {
          const idx = summaries.findIndex(s => s.id === id);
          if (idx > -1) {
            summaries[idx] = { ...summaries[idx], title, area, content, timestamp: Date.now() };
          }
        } else {
          summaries.push({ id: 'summary-' + Date.now(), title, area, content, timestamp: Date.now() });
        }
        saveSummaries();
        renderSummaries();
        const button = form.querySelector('button[type="submit"]');
        const originalText = saveButtonText.textContent;
        button.querySelector('span').textContent = id ? 'Atualizado!' : 'Salvo!';
        setTimeout(() => { button.querySelector('span').textContent = originalText; }, 1500);
        if (!id) clearForm();
      });

      searchInput.addEventListener('input', (e) => {
        currentSearch = e.target.value;
        renderSummaries();
      });

      filterOptions.forEach(option => {
        option.addEventListener('click', () => {
          filterOptions.forEach(btn => btn.classList.remove('active'));
          option.classList.add('active');
          currentFilter = option.dataset.area;
          renderSummaries();
        });
      });

      modalClose.addEventListener("click", closeModal);
      closeX.addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });

      clearButton.addEventListener('click', clearForm);
      renderSummaries();
    });
  </script>
</body>
</html>